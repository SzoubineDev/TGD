<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Secure Debate Platform</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/profanity-filter@1.0.0/lib/profanity-filter.min.js"></script>
    <style>
      :root {
        --primary: #1a365d;
        --primary-light: #2d3748;
        --secondary: #ecc94b;
        --gray-900: #1a202c;
        --white: #ffffff;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f7fafc;
        color: var(--gray-900);
        line-height: 1.6;
      }

      .security-section {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        padding: 2rem;
        color: var(--white);
        border-radius: 0 0 20px 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
      }

      .security-container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .security-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .security-header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }

      .security-header p {
        opacity: 0.9;
        font-size: 1.1rem;
      }

      .security-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .feature-card {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 1.5rem;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      }

      .feature-card h3 {
        font-size: 1.3rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .feature-card h3 i {
        color: var(--secondary);
      }

      .feature-card ul {
        list-style-type: none;
      }

      .feature-card li {
        margin-bottom: 0.5rem;
        padding-left: 1.5rem;
        position: relative;
      }

      .feature-card li:before {
        content: '‚úì';
        position: absolute;
        left: 0;
        color: var(--secondary);
        font-weight: bold;
      }

      .demo-section {
        background: var(--white);
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
      }

      .demo-section h2 {
        color: var(--primary);
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .demo-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
      }

      @media (max-width: 768px) {
        .demo-container {
          grid-template-columns: 1fr;
        }
      }

      .input-area,
      .output-area {
        display: flex;
        flex-direction: column;
      }

      .input-area textarea {
        height: 150px;
        padding: 1rem;
        border: 1px solid #cbd5e0;
        border-radius: 8px;
        resize: vertical;
        margin-bottom: 1rem;
        font-size: 1rem;
      }

      .input-area button {
        background: var(--secondary);
        color: var(--gray-900);
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.3s ease;
      }

      .input-area button:hover {
        background: #d69e2e;
      }

      .output-area .message {
        background: #edf2f7;
        padding: 1rem;
        border-radius: 8px;
        min-height: 150px;
        border: 1px dashed #cbd5e0;
      }

      .rules-section {
        background: var(--white);
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .rules-section h2 {
        color: var(--primary);
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .rules-tabs {
        display: flex;
        border-bottom: 1px solid #e2e8f0;
        margin-bottom: 1.5rem;
      }

      .tab-button {
        padding: 0.8rem 1.5rem;
        background: none;
        border: none;
        cursor: pointer;
        font-weight: 600;
        color: #718096;
        border-bottom: 3px solid transparent;
        transition: all 0.3s ease;
      }

      .tab-button.active {
        color: var(--primary);
        border-bottom: 3px solid var(--secondary);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        padding: 1.5rem;
        border-radius: 8px;
        overflow-x: auto;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .alert {
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .alert.warning {
        background: #fed7d7;
        color: #c53030;
        border-left: 4px solid #fc8181;
      }

      .alert.success {
        background: #c6f6d5;
        color: #2d7d32;
        border-left: 4px solid #68d391;
      }

      .status-indicator {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .status-indicator.secure {
        background: #c6f6d5;
        color: #2d7d32;
      }

      .status-indicator.insecure {
        background: #fed7d7;
        color: #c53030;
      }

      .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      .status-dot.secure {
        background: #2d7d32;
      }

      .status-dot.insecure {
        background: #c53030;
      }
    </style>
  </head>
  <body>
    <section class="security-section">
      <div class="security-container">
        <div class="security-header">
          <h1>Firebase Security Implementation</h1>
          <p>Protect your application from unauthorized content and malicious users</p>
        </div>

        <div class="security-features">
          <div class="feature-card">
            <h3><i>üîí</i> Authentication Security</h3>
            <ul>
              <li>User authentication required for write operations</li>
              <li>Email verification for sensitive actions</li>
              <li>Role-based access control</li>
              <li>Session management and timeout</li>
            </ul>
          </div>

          <div class="feature-card">
            <h3><i>üõ°Ô∏è</i> Firestore Security Rules</h3>
            <ul>
              <li>Content validation rules</li>
              <li>User ownership verification</li>
              <li>Rate limiting for writes</li>
              <li>Prevention of mass deletions</li>
            </ul>
          </div>

          <div class="feature-card">
            <h3><i>üö´</i> Content Moderation</h3>
            <ul>
              <li>Profanity filtering</li>
              <li>Image content scanning</li>
              <li>Report and flagging system</li>
              <li>Admin moderation panel</li>
            </ul>
          </div>
        </div>

        <div class="status-indicator secure">
          <div class="status-dot secure"></div>
          Security Status: Protected
        </div>
      </div>
    </section>

    <div class="security-container">
      <section class="demo-section">
        <h2>Content Moderation Demo</h2>
        <div class="demo-container">
          <div class="input-area">
            <textarea id="userInput" placeholder="Try posting inappropriate content here...">
This is a test message with some bad words.</textarea
            >
            <button id="submitBtn">Check Content</button>
          </div>
          <div class="output-area">
            <div class="message" id="outputMessage">
              Safe content will appear here. Try posting something inappropriate to see the filter
              in action.
            </div>
          </div>
        </div>
      </section>

      <section class="rules-section">
        <h2>Firebase Security Rules</h2>

        <div class="rules-tabs">
          <button class="tab-button active" data-tab="firestore">Firestore Rules</button>
          <button class="tab-button" data-tab="storage">Storage Rules</button>
          <button class="tab-button" data-tab="auth">Authentication</button>
        </div>

        <div class="tab-content active" id="firestore-tab">
          <div class="alert warning">
            <strong>Warning:</strong> Never rely solely on client-side validation. Always implement
            server-side security rules.
          </div>

          <div class="code-block">
            // Firestore Security Rules rules_version = '2'; service cloud.firestore { match
            /databases/{database}/documents { // Posts collection - users can only read approved
            content match /posts/{postId} { allow read: if resource.data.approved == true; allow
            create: if request.auth != null && request.auth.token.email_verified == true &&
            request.resource.data.keys().hasAll(['title', 'content', 'authorId']) &&
            request.resource.data.authorId == request.auth.uid && request.resource.data.title is
            string && request.resource.data.title.size() >= 5 && request.resource.data.title.size()
            <= 100 && request.resource.data.content is string &&
            request.resource.data.content.size() >= 10 && request.resource.data.content.size() <=
            5000 &&
            !request.resource.data.content.matches('(?i).*\\b(asshole|fuck|porn|nigger|shit|cunt)\\b.*');
            allow update, delete: if request.auth != null && request.auth.uid ==
            resource.data.authorId && request.resource.data.approved == false; } // Admin users have
            full access match /{document=**} { allow read, write: if request.auth != null &&
            get(/databases/$(database)/documents/admins/$(request.auth.uid)).data.isAdmin == true; }
            } }
          </div>
        </div>

        <div class="tab-content" id="storage-tab">
          <div class="code-block">
            // Firebase Storage Rules rules_version = '2'; service firebase.storage { match
            /b/{bucket}/o { // User uploads - only images under 5MB allowed match
            /uploads/{userId}/{allPaths=**} { allow read: if request.auth != null; allow write: if
            request.auth != null && request.auth.uid == userId && request.resource.size < 5 * 1024 *
            1024 && request.resource.contentType.matches('image/.*') &&
            request.resource.name.matches('.*\\.(jpg|jpeg|png|gif)$'); } // Public content - anyone
            can read approved content match /public/{allPaths=**} { allow read: if
            resource.metadata.approved == 'true'; allow write: if request.auth != null &&
            get(/databases/$(database)/documents/admins/$(request.auth.uid)).data.isAdmin == true; }
            } }
          </div>
        </div>

        <div class="tab-content" id="auth-tab">
          <div class="code-block">
            // Authentication Security Implementation (JavaScript) import { initializeApp } from
            'firebase/app'; import { getAuth, createUserWithEmailAndPassword,
            signInWithEmailAndPassword, sendEmailVerification, onAuthStateChanged, signOut } from
            'firebase/auth'; const firebaseConfig = { // Your Firebase config here }; const app =
            initializeApp(firebaseConfig); const auth = getAuth(app); // Only allow verified users
            to post content function canUserPost() { const user = auth.currentUser; return user &&
            user.emailVerified; } // Require email verification for new users async function
            registerUser(email, password) { try { const userCredential = await
            createUserWithEmailAndPassword(auth, email, password); await
            sendEmailVerification(userCredential.user); // Redirect to verification page
            alert('Please verify your email before posting content.'); } catch (error) {
            console.error('Registration error:', error); alert('Registration failed: ' +
            error.message); } } // Monitor authentication state onAuthStateChanged(auth, (user) => {
            if (user) { if (user.emailVerified) { // User is verified, enable posting
            document.getElementById('postButton').disabled = false; } else { // User not verified,
            disable posting document.getElementById('postButton').disabled = true; alert('Please
            verify your email to post content.'); } } else { // User is signed out
            document.getElementById('postButton').disabled = true; } });
          </div>
        </div>
      </section>
    </div>

    <script>
      // Tab functionality
      document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', () => {
          // Remove active class from all buttons and content
          document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
          document
            .querySelectorAll('.tab-content')
            .forEach(content => content.classList.remove('active'));

          // Add active class to clicked button
          button.classList.add('active');

          // Show corresponding content
          const tabId = button.getAttribute('data-tab') + '-tab';
          document.getElementById(tabId).classList.add('active');
        });
      });

      // Content moderation demo
      document.getElementById('submitBtn').addEventListener('click', () => {
        const userInput = document.getElementById('userInput').value;
        const outputMessage = document.getElementById('outputMessage');

        // Simple profanity filter (in a real app, use a more comprehensive library)
        const blockedWords = ['asshole', 'fuck', 'porn', 'nigger', 'shit', 'cunt', 'dick', 'pussy'];
        let filteredText = userInput;
        let hasProfanity = false;

        blockedWords.forEach(word => {
          const regex = new RegExp(`\\b${word}\\b`, 'gi');
          if (regex.test(filteredText)) {
            hasProfanity = true;
            filteredText = filteredText.replace(regex, '*'.repeat(word.length));
          }
        });

        if (hasProfanity) {
          outputMessage.innerHTML = `
                    <div class="alert warning">
                        <strong>Content Blocked:</strong> Your message contains inappropriate content.
                    </div>
                    <p><strong>Filtered message:</strong> ${filteredText}</p>
                    <p>This content would be rejected by our security rules.</p>
                `;
        } else {
          outputMessage.innerHTML = `
                    <div class="alert success">
                        <strong>Content Approved:</strong> Your message passed our content filters.
                    </div>
                    <p><strong>Your message:</strong> ${filteredText}</p>
                    <p>This content would be accepted by our security rules.</p>
                `;
        }
      });

      // Initialize with a sample inappropriate message
      document.getElementById('userInput').value =
        'This is a test message with some bad words like shit and porn.';
    </script>
  </body>
</html>
